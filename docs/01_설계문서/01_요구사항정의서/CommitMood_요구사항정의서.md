# 📋 요구사항 정의서

> [!NOTE]
> 본 문서는 GitHub 커밋 메시지를 기반으로 사용자의 커밋 습관과 감정적 특성을 분석하고 시각화하는 서비스인 CommitMood의 기능 요구사항을 정의합니다.

<br>

## 📋 목차

- [📑 기능 범위](#-기능-범위)
- [⚾️ 기본 기능 요구사항](#-기본-기능-요구사항)
- [➕ 추가 기능 요구사항](#-추가-기능-요구사항)
- [😆 심화 기능 요구사항](#-심화-기능-요구사항)
- [💫 비기능 요구사항](#-비기능-요구사항)
- [🤔 향후 고려 사항](#-향후-고려-사항)

<br>

## 📑 기능 범위

- GitHub OAuth 기반 사용자 인증
- GitHub 커밋 데이터 수집 및 저장
- GitHub 커밋 메시지 분석 및 랭킹 제공
- 시각화 UI 및 확장 기능 정의

<br>

## ⚾️ 기본 기능 요구사항

| 기능 구분  | 요구사항                  | 설명                                                       |
|--------|-----------------------|----------------------------------------------------------|
| 사용자 인증 | GitHub OAuth 2.0 로그인  | 사용자가 GitHub 계정을 연동하여 개인 커밋 데이터 접근                        |
| 커밋 수집  | GitHub REST API 연동    | GET `/repos/{repoId}/commits` API를 통해 커밋 메시지, 작성자, 날짜 수집 |
| 데이터 저장 | DB 스키마 설계 및 저장        | commit_log, user_stat 등 기본 테이블 설계 및 영속화                  |
| 감정 필터링 | 단어 사전 기반 필터링          | 커밋 메시지에서 감탄사, 특정 키워드 감지                                  |
| 랭킹 계산  | `flagged_count` 기반 순위 | 감정 또는 긍정 기준 점수를 바탕으로 사용자 랭킹 산출                           |
| 기본 UI  | 명예의 전당 페이지            | 잘 작성된 커밋을 많이 남긴 사용자 TOP3 표시                              |

### 📌 랭킹 산정 기준 정의 (MVP)

- `flagged_count`: 감정/감탄사 키워드가 포함된 커밋 메시지의 누적 횟수
- 사용자 점수는 기간 내 `flagged_count` 합산 기준
- 동점 발생 시
    - 커밋 수가 많은 사용자 우선
    - 이후 최신 커밋 일자 기준

<br>

## ➕ 추가 기능 요구사항

| 기능 구분    | 요구사항               | 설명                              |
|----------|--------------------|---------------------------------|
| 커밋 분석    | 커밋 분석 서비스          | 사용자의 커밋 내역을 분석하여 통계 정보 제공       |
| Git 랭킹   | 유저 간 비교 랭킹         | 전체 사용자 대상 리더보드 제공               |
| 감정 분포 분석 | 감정 비율 시각화          | 긍정, 부정 커밋 비율을 그래프로 표현           |
| 사용자 검색   | 유저 및 Repository 검색 | 특정 GitHub 사용자 또는 저장소 검색 및 결과 조회 |

<br>

## 😆 심화 기능 요구사항

| 기능 구분           | 요구사항          | 설명                                   |
|-----------------|---------------|--------------------------------------|
| AI 기반 커밋 평가     | LLM 활용 분석     | GPT 등을 활용하여 커밋 감정에 대한 AI 코멘트 생성      |
| Commit Mood Map | 시각화 대시보드      | 커밋 감정 상태를 달력 히트맵 형태로 표현              |
| 팀 단위 분석         | Org 단위 API 연동 | 회사 또는 팀 단위 커밋 데이터 집계 및 비교            |
| 캐싱 최적화          | Redis 및 메시지 큐 | 대규모 요청 처리 및 비동기 분석 파이프라인 구축          |
| 배포 자동화          | CI/CD 파이프라인   | Docker와 GitHub Actions 기반 자동 빌드 및 배포 |
| 익명 모드           | 개인정보 보호       | 닉네임 익명화 및 공개 범위 설정 기능 제공             |

<br>

## 💫 비기능 요구사항

- **성능**
    - 커밋 수집, 분석 요청은 비동기 처리
    - 대량의 데이터 요청 시 캐싱 적용
    - 캐시 히드 시 조회 API 응답 시간 최소화
- **보안**
    - OAuth access token 암호화 저장
    - 사용자 공개 범위 설정에 따른 데이터 접근 제어
- **확장성**
    - 기능별 모듈 분리 설계
    - 감정 분석 및 AI 기능은 독립 서비스로 확장 가능하도록 구성

<br>

## 🤔 향후 고려 사항

- 감정 분석 정확도 향상을 위한 사전 및 모델 고도화
- 공개 repository 크롤링 시 GitHub 정책 및 라이선스 검토
- 조직 단위 데이터 활용 시 개인정보 및 라이선스 이슈 검토
